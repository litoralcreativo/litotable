<div class="litotable-container mat-elevation-z8">
  <div *ngIf="dataSource">
    <table
      mat-table
      [dataSource]="dataSource"
      matSort
      (matSortChange)="announceSortChange($event)"
    >
      <ng-container
        *ngFor="let column of displayedColumns.columns"
        matColumnDef="{{ column.name }}"
      >
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header="{{ column.propertyKey }}"
          sortActionDescription="Sort by {{ column.propertyKey }}"
        >
          {{ column.name }}
        </th>
        <td mat-cell *matCellDef="let element">
          <div *ngIf="column.type == columnTypes.STRING">
            {{ element[column.propertyKey] }}
          </div>
          <div *ngIf="column.type == columnTypes.DATE">
            {{
              element[column.propertyKey]
                | date: (column.format ? column.format : "short")
            }}
          </div>
          <div *ngIf="column.type == columnTypes.CURRENCY">
            {{ element[column.propertyKey] | currency }}
          </div>
          <div *ngIf="column.type == columnTypes.CUIT">
            {{ element[column.propertyKey] | cuit: "-" }}
          </div>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns.columnNames"></tr>
      <tr
        mat-row
        (click)="
          !selectedRows.has(row)
            ? selectedRows.add(row)
            : selectedRows.delete(row)
        "
        [ngStyle]="
          constrainedRows.has(row) ? row.constrain.style : tableConfigurations
        "
        *matRowDef="let row; columns: displayedColumns.columnNames"
      ></tr>
    </table>
    <mat-paginator
      [pageSizeOptions]="tableConfigurations?.paginationSizes || [5, 10, 20]"
      showFirstLastButtons
      aria-label="Select page of periodic elements"
    >
    </mat-paginator>
    <mat-progress-bar
      [mode]="fetching ? 'indeterminate' : 'determinate'"
    ></mat-progress-bar>
  </div>
</div>
